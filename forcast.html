<html>
<body>
<div id="details">
</div>
<div id="details1"></div>
<script>
// let reqcount = 0

navigator.geolocation.getCurrentPosition(showPosition)
let lat, lon;

function showPosition(position) {
  const { latitude,longitude } = position.coords

//   reqcount++
//   details.innerHTML = "Accuracy : " + accuracy + "<br>"
  details.innerHTML += "Latitude:" + latitude + "<br>"
  details.innerHTML += "Longitude:" + longitude + "<br>"
//   details.innerHTML += "Heading:" + heading+ "<br>"
//   details.innerHTML += "Speed:" + speed+ "<br>"
//   details.innerHTML += "Altitude:" + altitude+ "<br>"
  details.innerHTML += '<iframe width="700" height="300" src="https://maps.google.com/maps?q='+latitude+','+longitude+'&amp;z=15&amp;output=embed"></iframe>'

  lat = latitude;
  lon = longitude;

  let data1;
  
  let link = 'https://fcc-weather-api.glitch.me/api/current?lat='+lat+'&lon='+lon
    fetch(link)
    .then(response => {
        return response.json()
    })
    .then(data => {
        console.log(data)
        details1.innerHTML += "Approx temperature:" + data.main.temp + "<br>"
        details1.innerHTML += "Humidity:" + data.main.humidity + "<br>"
        details1.innerHTML += "Maximum Temperature:" + data.main.temp_max + "<br>"
        details1.innerHTML += "Minimum Temperature:" + data.main.temp_min + "<br>"
        details1.innerHTML += "Wind speed:" + data.wind.speed + '<br>'
        details1.innerHTML += "Wind direction:" + data.wind.deg + 'degrees' + '<br>'
    })
}

// function errorCallback(error) {
// }

// var options = {
//   enableHighAccuracy: false,
//   maximumAge: 0
// }

// let API_key = 'c7ead3aeb13fba0a61e1e713ad03a7a2'
// fetch(
//      "http://api.openweathermap.org/data/2.5/weather?units=metric&q=c7ead3aeb13fba0a61e1e713ad03a7a2"
//    )

//       .then((response) => response.json())
//       .then(
//         (response) => {
//           setResponseObj(response);
//         },
//         (error) => {
//           alert("Error in fetching weather data : " + error.message);
//         }
//       );

    // let link = 'https://fcc-weather-api.glitch.me/api/current?lat='+lon+'&lon='+lon
    // fetch(link)
    // .then(response => console.log(response))

</script>
</body>
</html>